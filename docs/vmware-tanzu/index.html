<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting Started with Hazelcast Enterprise IMDG for VMware Tanzu</title>
    <link rel="canonical" href="https://guides.hazelcast.org/vmware-tanzu/">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../_/css/site.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3921306-4"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-3921306-4')</script>
    <link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <img
        class="logo"
        alt="Hazelcast"
        srcset="../_/img/hazelcast-logo-white.png 1x, ../_/img/hazelcast-logo-white@2x.png 2x, ../_/img/hazelcast-logo-white@3x.png 3x"
      />
      <a class="navbar-item" href="../home/">Hazelcast Guides</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://hazelcast.org/">
          hazelcast.org
           <img
              class="external-link"
              alt="Hazelcast"
              srcset="../_/img/external-link.png 1x, ../_/img/external-link@2x.png 2x, ../_/img/external-link@3x.png 3x"
            />
          </a>
      </div>
    </div>
  </nav>
</header>
<div class="body">

<div class="nav-container" data-component="vmware-tanzu" data-version="master">
  <aside class="nav">
    <div class="panels">
    </div>
  </aside>
</div>
<!--
nav is included to make toc visible only.
It's not visible on the page. It needs to
be removed after toc is made independent
from nav.
-->

<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
</div>
  <div class="content">
<article class="guide-content">
<h1 class="page">Getting Started with Hazelcast Enterprise IMDG for VMware Tanzu</h1>
<p class="edit-page"><a href=https://github.com/hazelcast-guides/vmware-tanzu/edit/master/doc/modules/ROOT/pages/index.adoc>See something wrong? Edit this page.</a></p>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide will get you started to use Hazelcast IMDG Enterprise at VMware Tanzu Application Service(TAS).</p>
</div>
<div class="paragraph">
<p>You can see the whole project <a href="https://github.com/hazelcast-guides/vmware-tanzu">here.</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_youll_learn"><a class="anchor" href="#_what_youll_learn"></a>What Youâ€™ll Learn</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this guide, you&#8217;ll learn how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install and configure <em>Hazelcast IMDG Enterprise</em> tile at <em>VMware Tanzu Application Service(TAS)</em>.</p>
</li>
<li>
<p>Create <em>Hazelcast IMDG Enterprise</em> cluster via service instances at TAS.</p>
</li>
<li>
<p>Run client application to put/get some data to/from map at the cluster.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>approximately 30 minutes</p>
</li>
<li>
<p><a href="https://docs.cloudfoundry.org/cf-cli/">cf cli</a></p>
</li>
<li>
<p>VMware Tanzu Application Service and Ops Manager environments</p>
</li>
<li>
<p>Git</p>
</li>
<li>
<p>JDK 1.8+</p>
</li>
<li>
<p>Apache Maven 3.2+</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_and_configuring_hazelcast_imdg_enterprise_for_vmware_tanzu"><a class="anchor" href="#_installing_and_configuring_hazelcast_imdg_enterprise_for_vmware_tanzu"></a>Installing and Configuring Hazelcast IMDG Enterprise for VMware Tanzu</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Complete the following steps to download and install the Hazelcast IMDG Enterprise for VMware Tanzu tile on Ops Manager.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the product file from <a href="https://network.pivotal.io/products/hazelcast">VMware Tanzu Network</a>.</p>
</li>
<li>
<p>Go to your <em>Ops Manager</em> dashboard at the pre-installed <em>VMware Tanzu Application Service</em> environment.</p>
</li>
<li>
<p>Navigate to the Ops Manager Installation Dashboard and click <strong>Import a Product</strong> to upload the product file.</p>
</li>
<li>
<p>Click <strong>Add</strong> next to the uploaded Hazelcast IMDG Enterprise for VMware Tanzu tile in the Ops Manager <strong>Available Products</strong> view to add it to your staging area.</p>
</li>
<li>
<p>Click the newly added <strong>Hazelcast IMDG Enterprise for VMware Tanzu</strong> tile.</p>
<div class="paragraph">
<p><span class="image"><img src="_images/tile.png" alt="tile"></span></p>
</div>
</li>
<li>
<p>Click <strong>Assign AZs and Networks</strong>. In the <strong>AZ and Network Assignments</strong> pane, do the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select the <strong>Network</strong> in which to deploy the Hazelcast Service Broker.</p>
</li>
<li>
<p>Select the <strong>Service Network</strong> in which to create VMs for Hazelcast.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/az.png" alt="az"></span></p>
</div>
</li>
<li>
<p>Click <strong>First On-demand plan</strong>. In the <strong>Hazelcast on-demand plan</strong> pane, do the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Enter a <strong>Plan name</strong>.</p>
</li>
<li>
<p>Enter a <strong>Plan description</strong>.
For an example of how the plan name and description appear on the command line, see <a href="#_using_hazelcast_imdg_enterprise_for_vmware_tanzu">Step 1</a> in the <em>Using Hazelcast IMDG Enterprise for VMware Tanzu</em> topic.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Specify the number of <strong>Hazelcast instances</strong> for this plan. This property defines the number of Hazelcast instances to be created. It can be overridden for each service instance when creating a service instance by using <code>instanceCount</code> parameter. See <a href="#_using_hazelcast_imdg_enterprise_for_vmware_tanzu">Step 2</a> in the <em>Using Hazelcast IMDG Enterprise for VMware Tanzu</em> topic for more information.</p>
</li>
<li>
<p>Select a <strong>Hazelcast VM type</strong>. Choose a suitable VM type according to your data size and processing power requirements.</p>
</li>
<li>
<p>If you are planning on using features like <a href="https://docs.hazelcast.org/docs/latest/manual/html-single/#hot-restart-persistence">Hot Restart</a> that require a persistent disk, select a <strong>Hazelcast Disk type</strong>. Otherwise, you can leave this option empty because Hazelcast, by default, does not require a persistent disk.</p>
</li>
<li>
<p>Select a <strong>Management Center VM type</strong>.</p>
</li>
<li>
<p>If you are planning on migrating Management Center between service instances and deployments that require a persistent disk, select a <strong>Management Center VM type</strong>. Otherwise, you can leave this option empty because Management Center, by default, does not require a persistent disk.</p>
</li>
<li>
<p>Select the <strong>Hazelcast availability zone(s)</strong> in which to create VMs for this plan.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
<div class="paragraph">
<p><span class="image"><img src="_images/first_plan.png" alt="first plan"></span></p>
</div>
</li>
<li>
<p>If you want to modify the additional Hazelcast IMDG Enterprise for VMware Tanzu plans, repeat the step above to configure the second and third on-demand plans.</p>
</li>
<li>
<p>Click <strong>Errands</strong> and ensure that both <strong>Register on-demand broker</strong> and <strong>Deregister on-demand broker</strong> are selected. These are necessary to create and destroy Hazelcast service instances. You can disable <strong>smoke-tests</strong> errand to decrease installation time.</p>
<div class="paragraph">
<p><span class="image"><img src="_images/errands.png" alt="errands"></span></p>
</div>
</li>
<li>
<p>Click <strong>Resource Config</strong> and review the IaaS resources used by the Hazelcast IMDG Enterprise for VMware Tanzu components. Do not modify these default settings.</p>
<div class="paragraph">
<p><span class="image"><img src="_images/resource_config.png" alt="resource config"></span></p>
</div>
</li>
<li>
<p>Return to the Ops Manager Installation Dashboard and click <strong>Apply Changes</strong> to complete the installation of Hazelcast IMDG Enterprise for VMware Tanzu. Installation porcess takes 15 minutes approximately.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_hazelcast_imdg_enterprise_for_vmware_tanzu"><a class="anchor" href="#_using_hazelcast_imdg_enterprise_for_vmware_tanzu"></a>Using Hazelcast IMDG Enterprise for VMware Tanzu</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After your VMware Tanzu operator installs the Hazelcast IMDG Enterprise for VMware Tanzu tile, it automatically registers itself to the Marketplace.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Login with the CLI to <em>TAS</em> environment:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">    $ cf login -a API-URL -u USERNAME -p PASSWORD -o ORG -s SPACE --skip-ssl-validation</code></pre>
</div>
</div>
</li>
<li>
<p>To check availability of Hazelcast IMDG Enterprise for VMware Tanzu, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">    $ cf marketplace
    Getting services from marketplace in org system / space system as admin...
    OK
    service         plans                            description
    hazelcast       small, medium, large    Hazelcast Service</code></pre>
</div>
</div>
</li>
<li>
<p>Clone the project to get JSON file containing service-specific configuration parameters:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">    $ git clone https://github.com/hazelcast-guides/vmware-tanzu.git</code></pre>
</div>
</div>
</li>
<li>
<p>To create a 3 nodes Hazelcast IMDG cluster and Management Center that coonnects to it, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">    $ cf create-service hazelcast PLAN SERVICE_INSTANCE_NAME -c /path/to/project/hazelcast-mancenter.json</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace <em>PUT_LICENSE_KEY_HERE</em> with the active Hazelcast IMDG Enterprise License or a trial license.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can create Hazelcast IMDG cluster without Management Center via following one line command as well <a href="#_installing_and_configuring_hazelcast_imdg_enterprise_for_vmware_tanzu">Installing and Configuring Hazelcast IMDG Enterprise for VMware Tanzu</a>:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">    $ cf cs hazelcast PLAN SERVICE_INSTANCE_NAME -c '{"hazelcast": {"license-key": "PUT_LICENSE_KEY_HERE"}}'</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>After the services are created, you can build sample client application that utilizes <code>VCAP_SERVICES</code> environment variable at project path:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">    $ mvn clean install</code></pre>
</div>
</div>
</li>
<li>
<p>To push application and , run following commands:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">    $ cf push APP_NAME -m 2G -i 1 -p /path/to/project/target/tanzu-sample-client-app-0.1.jar --no-manifest --no-start</code></pre>
</div>
</div>
</li>
<li>
<p>Now you can bind Hazelcast IMDG services to the application and start it:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">    $ cf bind-service APP_NAME SERVICE_INSTANCE_NAME
    $ cf start APP_NAME</code></pre>
</div>
</div>
</li>
<li>
<p>To put/get data into Hazelcast IMDG map, run following commands:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">    $ export APP_ROUTE=`cf app APP_NAME | grep routes | awk '{ print $2 }'`
    $ curl -s "http://${APP_ROUTE}/put?key=1&amp;value=1"
    $ curl -s "http://${APP_ROUTE}/get?key=1"</code></pre>
</div>
</div>
</li>
<li>
<p>You can reach Management Center dashboard via <a href="http://mancenter.YOUR_APPS_DOMAIN" class="bare">http://mancenter.YOUR_APPS_DOMAIN</a> URL. Replace <em>YOUR_APPS_DOMAIN</em> with the output of following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">    $ cf domains | grep -i apps.*.cf-app.com | awk '{ print $1 }'</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_whats_more"><a class="anchor" href="#_whats_more"></a>Whatâ€™s more?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can check other use cases for the tile like <em>WAN Replication</em>, <em>Rolling Upgrade</em> at <a href="https://docs.pivotal.io/partners/hazelcast/using.html">official documentation</a>.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
  </body>
  <footer class="footer">
<footer class="footer">
  <a href="https://www.hazelcast.org" class="icon">
    <img src="../_/img/hazelcast.png" alt="Hazelcast">
  </a>
  <a href="https://slack.hazelcast.com" class="slack-button">Join Us On Slack</a>
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </footer>
</html>
